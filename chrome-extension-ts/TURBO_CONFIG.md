# Turborepo Configuration Guide

This document explains the `turbo.json` configuration file, which is the main entry point for the build system orchestration.

## Overview

The `turbo.json` file defines how tasks run across the monorepo. It specifies dependencies between tasks, caching behavior, and output locations.

## Key Components

### Global Settings

- `$schema`: JSON schema for validation
- `ui`: User interface style for turbo CLI (set to "tui" for terminal UI)
- `globalEnv`: Environment variables that should be forwarded to all tasks
- `globalDependencies`: Files that, when changed, should trigger a full rebuild
- `daemon`: Whether to use a background process (disabled for better compatibility)

### Task Definitions

Tasks define the build pipeline and how different operations depend on each other:

#### `ready` Task
- Runs first to prepare dependencies
- `dependsOn: ["^ready"]`: The `^` means "wait for this task to complete in all dependencies"
- `outputs`: Files generated by this task
- `cache`: Whether to cache results (disabled for development)

#### `dev` Task
- Used when running `pnpm dev`
- Requires the ready task to complete first
- Keeps running and watching for changes (`persistent: true`)

#### `build` Task
- Used when running `pnpm build`
- Requires ready task AND build tasks of dependencies
- Produces the final extension build

#### Other Tasks
- `e2e`: End-to-end testing
- `type-check`: Validates TypeScript types
- `lint`: Checks code style and quality

## Build Flow

When you run `pnpm build`, Turborepo:

1. Determines which packages need to be built
2. Executes the tasks in the correct order based on dependencies
3. Collects outputs and places them in the specified directories

This orchestration ensures all components are built in the correct order with their dependencies satisfied.
